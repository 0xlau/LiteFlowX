<idea-plugin require-restart="true" allow-bundled-update="true" url="https://gitee.com/liupeiqiang/LiteFlowX">

    <id>top.xystudio.plugin.idea.LiteFlowX</id>
    <name>LiteFlowX</name>
    <vendor email="237972113@qq.com" url="https://gitee.com/liupeiqiang/LiteFlowX">Coder-XiaoYi</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.properties</depends>
    <depends>org.jetbrains.plugins.yaml</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.intellij.intelliLang</depends>
    <depends>com.intellij.java</depends>
    <depends optional="true" config-file="LiteFlowX-optionalJavaScript.xml">JavaScript</depends>

    <extensions defaultExtensionNs="org.intellij.intelliLang">
        <!-- LiteFlow Chain语法注入 -->
        <injectionConfig config="language/xmlInjections.xml"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">

        <!-- LiteFlow 工具窗口 -->
        <toolWindow id="LiteFlow Tools"
                    factoryClass="top.xystudio.plugin.idea.liteflowx.toolwindow.LiteFlowToolWindowFactory"
                    anchor="right"
                    icon="LiteFlowIcons.TOOL_WINDOW_ICON"
        />

        <!-- LiteFlow @LiteFlowMethod用法检测 -->
        <annotator
                language="JAVA"
                implementationClass="top.xystudio.plugin.idea.liteflowx.annotator.LiteFlowMethodUsageAnnotator"
        />

        <!-- LiteFlow @LiteFlowCmpDefine用法检测 -->
        <annotator
                language="JAVA"
                implementationClass="top.xystudio.plugin.idea.liteflowx.annotator.LiteFlowCmpDefineUsageAnnotator"
        />

        <!-- LiteFlow @LiteFlowMethod 行图标 -->
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="top.xystudio.plugin.idea.liteflowx.provider.LiteFlowMethodLineMarkerProvider"/>

        <fileType
                name="LiteFlow File"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.LiteFlowFileType"
                fieldName="INSTANCE"
                language="LiteFlow"
                extensions="elf"/>

        <!-- LiteFLow跳转到声明 -->
        <gotoDeclarationHandler order="first" implementation="top.xystudio.plugin.idea.liteflowx.search.ElfGotoDeclarationHandler"/>

        <!-- LiteFlow处理ComponentRef -->
        <annotator
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.annotator.LiteFlowNodeRefAnnotator"/>

        <!-- LiteFlow处理ElVariableRef -->
        <annotator
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.annotator.ElVariableRefAnnotator"/>

        <!-- LiteFlow语法解析 -->
        <lang.parserDefinition language="LiteFlow" implementationClass="top.xystudio.plugin.idea.liteflowx.language.LiteFlowParserDefinition"/>

        <!-- LiteFlow括号匹配 -->
        <lang.braceMatcher language="LiteFlow"
                           implementationClass="top.xystudio.plugin.idea.liteflowx.language.editing.LiteFlowBraceMatcher"/>

        <!-- LiteFlowEnterBetweenBracesDelegate -->
        <enterBetweenBracesDelegate language="LiteFlow" implementationClass="top.xystudio.plugin.idea.liteflowx.language.editing.LiteFlowEnterBetweenBracesDelegate"/>

        <!-- LiteFlow自动缩进 -->
        <lineIndentProvider implementation="top.xystudio.plugin.idea.liteflowx.language.editing.LiteFlowLineIndentProvider" />

        <!-- LiteFlow语法高亮 -->
        <lang.syntaxHighlighterFactory
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.highlight.LiteFlowSyntaxHighlighterFactory"/>

        <!-- LiteFLow快速注释 -->
        <lang.commenter
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.editing.LiteFlowCommenter"/>

        <!-- LiteFlow智能提示 -->
        <completion.contributor
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.completion.LiteFlowBaseCompletionContributor"/>
        <completion.contributor
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.completion.LiteFlowNodeRefCompletionContributor"/>
        <completion.contributor
                language="LiteFlow"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.completion.ElVariableRefCompletionContributor"/>

        <!-- LiteFlow语法颜色设置页面 -->
        <colorSettingsPage
                implementation="top.xystudio.plugin.idea.liteflowx.language.highlight.LiteFLowLanguageColorSettingPage"/>

        <!-- China处理 -->
        <annotator
                language="XML"
                implementationClass="top.xystudio.plugin.idea.liteflowx.language.annotator.XmlChainAnnotator"/>

        <projectService id="liteflowx.LiteFlowService" serviceImplementation="top.xystudio.plugin.idea.liteflowx.service.LiteFlowService"/>
        <projectService id="liteflowx.FileService" serviceImplementation="top.xystudio.plugin.idea.liteflowx.service.FileService"/>

        <!-- flow.xml文件属性提示 -->
        <dom.fileMetaData id="liteflowx.FlowDescription" rootTagName="flow" implementation="top.xystudio.plugin.idea.liteflowx.common.dom.description.FlowDescription"/>

        <!-- Java to Chain 跳转 Ctrl+左键 或 Ctrl+B-->
        <gotoDeclarationHandler order="first" implementation="top.xystudio.plugin.idea.liteflowx.search.JavaToChainGotoDeclarationHandler"/>
        <!-- ruleSource to File 跳转 Ctrl+左键 或 Ctrl+B-->
        <gotoDeclarationHandler order="first" implementation="top.xystudio.plugin.idea.liteflowx.search.RuleSourceToFileGotoDeclarationHandler" />

        <!-- 文件图标提供 -->
        <iconProvider id="liteflowx.FileIconProvider"
                      implementation="top.xystudio.plugin.idea.liteflowx.provider.FileIconProvider"/>

        <!-- 索引 LiteFlow Node -->
        <postStartupActivity implementation="top.xystudio.plugin.idea.liteflowx.event.LiteFlowIndexEvent"/>
        <!-- 重新索引 LiteFlow Node -->
        <postStartupActivity implementation="top.xystudio.plugin.idea.liteflowx.event.LiteFlowReIndexEvent"/>

    </extensions>

</idea-plugin>